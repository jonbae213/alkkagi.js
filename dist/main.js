!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.power=0,this.selectedStone=!1,this.dir=null,this.stonePos=[],this.player="white",this.notify("your move")}var e,n,i;return e=t,(n=[{key:"handleKeyHeld",value:function(t){if(32===t.keyCode&&!(this.power>=.95)){this.power+=.1;var e=504*this.power;document.getElementsByClassName("power-bar")[0].style.width="".concat(e,"px")}}},{key:"handleKeyUp",value:function(t){this.power=0,this.dir=!1,this.stonePos=[],this.selectedStone=!1,document.getElementsByClassName("power-bar")[0].style.width="0",this.notify(""),this.player="white"===this.player?"black":"white",this.notify("your move")}},{key:"handleFirstMouseClick",value:function(t,e){var n=this,r=t.pageX-t.target.offsetLeft-7,o=t.pageY-t.target.offsetTop-170;e.forEach((function(t){Math.sqrt(Math.pow(r-t.pos[0],2)+Math.pow(o-t.pos[1],2))<10&&(n.selectedStone=t.num,n.stonePos=t.pos,n.notify("flicking..."))}))}},{key:"handleSecondMouseClick",value:function(t){this.notify("calculating power...");var e=t.pageX-t.target.offsetLeft-7,n=t.pageY-t.target.offsetTop-170,o=r(this.stonePos,2),i=o[0],a=o[1];this.dir=Math.atan2(a-n,i-e)}},{key:"notify",value:function(t){document.getElementById(this.player).innerText=t}}])&&o(e.prototype,n),i&&o(e,i),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=n,this.lastTime=0,this.game=e,this.deltaTime=0,this.input=new i,this.setupInputs(),this.game.flickStone=this.game.flickStone.bind(this.game)}var e,n,r;return e=t,(n=[{key:"animate",value:function(t){this.deltaTime=t-this.lastTime,this.lastTime=t,this.game.moveStones(this.deltaTime),this.game.draw(this.ctx),requestAnimationFrame(this.animate.bind(this))}},{key:"setupInputs",value:function(){var t=this;document.addEventListener("keydown",(function(e){Number.isInteger(t.input.selectedStone)&&t.input.dir&&t.input.handleKeyHeld(e)})),document.addEventListener("keyup",(function(e){t.input.dir&&(t.input.player,t.game.flickStone(t.input.dir,t.input.power,t.input.selectedStone,t.deltaTime),t.input.handleKeyUp(e))})),document.getElementById("board").addEventListener("click",(function(e){var n=[];t.game.board.stones.forEach((function(e){e.color===t.input.player&&n.push(e)})),Number.isInteger(t.input.selectedStone)?t.input.handleSecondMouseClick(e):t.input.handleFirstMouseClick(e,n)}))}}])&&a(e.prototype,n),r&&a(e,r),t}();function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pos=n,this.finalPos=null,this.color=e,this.num=r,this.vel=[]}var e,n,r;return e=t,(n=[{key:"draw",value:function(t){var e=u(this.pos,2),n=e[0],r=e[1];t.beginPath(),t.arc(n,r,10,0,2*Math.PI),t.stroke(),t.fillStyle=this.color,t.fill()}},{key:"move",value:function(){if(0!==this.vel.length){var t=u(this.pos,2),e=t[0],n=t[1],r=u(this.vel,2),o=r[0],i=r[1];this.pos[0]===this.finalPos[0]&&this.pos[1]===this.finalPos[1]?(this.vel=[],this.finalPos=null):this.pos=[e+o,n+i]}}}])&&l(e.prototype,n),r&&l(e,r),t}();function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=[[46,142],[46,262],[46,382],[70,82],[70,202],[70,322],[70,442]],y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stones=[],this.placeWhiteStones(),this.placeBlackStones()}var e,n,r;return e=t,(n=[{key:"placeWhiteStones",value:function(){for(var t=0;this.stones.length<7;)this.stones.push(new c("white",p[t],t)),t++}},{key:"placeBlackStones",value:function(){for(var t=7,e=0;this.stones.length<14;){var n=f(p[e],2),r=n[0],o=n[1];this.stones.push(new c("black",[500-r,500-o],t)),t++,e++}}},{key:"draw",value:function(t){t.beginPath(),t.rect(0,0,504,504),t.fillStyle="rgba(125, 85, 11, 0.5)",t.fill();for(var e=21;e<=480;e+=24)for(var n=21;n<=480;n+=24)t.moveTo(e,21),t.lineTo(e,480),t.strokeStyle="rgba(38, 12, 12, 0.26)",t.stroke(),t.moveTo(21,n),t.lineTo(480,n),t.strokeStyle="rgba(38, 12, 12, 0.26)",t.stroke()}}])&&h(e.prototype,n),r&&h(e,r),t}();function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=new y,this.winner=""}var e,n,r;return e=t,(n=[{key:"draw",value:function(t){t.clearRect(0,0,504,504),this.board.draw(t),this.board.stones.forEach((function(e){e.draw(t)}))}},{key:"moveStones",value:function(t){this.board.stones.forEach((function(e){e.move(t)}))}},{key:"flickStone",value:function(t,e,n,r){var o=this,i=this.findStoneInd(n),a=this.board.stones[i],s=this.getFinalPos(a,t,e),u=null,l=[this.board.stones[0].pos[0]-a.pos[0],this.board.stones[0].pos[1]-a.pos[1]];if(this.board.stones.forEach((function(e){var n=d(a.pos,2),r=n[0],i=n[1],c=d(e.pos,2),f=[c[0]-r,c[1]-i];e.num!==a.num&&o.hitStone(a,s,e,t)&&Math.abs(f[0])<Math.abs(l[0])&&Math.abs(f[1])<Math.abs(l[1])&&(l=f,u=e)})),null!==u)a.finalPos=u.pos,this.flickStone(t,e,u.num,r);else if(a.finalPos=s,this.outOfBounds(a))return void this.removeStone(a);a.vel=[l[0]/r,l[1]/r],this.gameOver()&&alert("".concat(this.winner," is the Winner! Muahahaha"))}},{key:"hitStone",value:function(t,e,n,r){for(var o=t.pos[0];o<e[0];o++){var i=[o+1,t.pos[1]+Math.tan(r)];return!!this.checkIfHit(i,n.pos)}}},{key:"gameOver",value:function(){var t=0,e=0;return this.board.stones.forEach((function(n){"white"===n.color?t+=1:e+=1})),0===t||0===e}},{key:"checkIfHit",value:function(t,e){var n=d(t,2),r=n[0],o=n[1],i=d(e,2),a=i[0],s=i[1];return Math.sqrt(Math.pow(a-r,2)+Math.pow(s-o,2))<=20}},{key:"findStoneInd",value:function(t){var e;return this.board.stones.forEach((function(n,r){n.num===t&&(e=r)})),e}},{key:"outOfBounds",value:function(t){var e=d(t.pos,2),n=e[0],r=e[1];return n<0||n>504||r<0||r>504}},{key:"removeStone",value:function(t){var e=[];this.board.stones.forEach((function(n){n.num!==t.num&&e.push(n)})),this.board.stones=e}},{key:"getFinalPos",value:function(t,e,n){return n*=504,[t.pos[0]+n*Math.cos(e),t.pos[1]+n*Math.sin(e)]}}])&&v(e.prototype,n),r&&v(e,r),t}();document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("board");t.height=504,t.width=504;var e=t.getContext("2d");new s(new b,e).animate()}))}]);
//# sourceMappingURL=main.js.map